<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Care API</title>
    <script src="https://apis.google.com/js/platform.js" async defer></script>
    <meta name="google-signin-client_id"
          content="347613347680-0d2tuu3d6fat2v98056e5ligi5tc9sq4.apps.googleusercontent.com">
    <script>
      function onSignIn(googleUser) {
        var id_token = googleUser.getAuthResponse().id_token;

        var xhr = new XMLHttpRequest();
        xhr.open('POST', '/api/users/google');
        xhr.setRequestHeader('Content-Type', 'application/json');
        xhr.send(JSON.stringify({token: id_token}));
      }
    </script>

    <script>
      window.fbAsyncInit = function () {
        FB.init({
          appId: '198300174315716',
          cookie: true,
          xfbml: true,
          version: 'v3.0'
        });

        FB.AppEvents.logPageView();

      };

      (function (d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) {
          return;
        }
        js = d.createElement(s);
        js.id = id;
        js.src = "https://connect.facebook.net/en_US/sdk.js";
        fjs.parentNode.insertBefore(js, fjs);
      }(document, 'script', 'facebook-jssdk'));


      function checkLoginState() {
        FB.getLoginStatus(function (response) {
          var xhr = new XMLHttpRequest();
          xhr.open('POST', '/api/users/facebook');
          xhr.setRequestHeader('Content-Type', 'application/json');
          xhr.send(JSON.stringify(response.authResponse));
        });
      }
    </script>
</head>
<body>
<div class="g-signin2" data-onsuccess="onSignIn"></div>
<fb:login-button
        scope="public_profile,email"
        onlogin="checkLoginState();">
</fb:login-button>
</body>
</html>
